bits 16
org 0x7c00

_start:
    xor     ax, ax
    mov     ds, ax

    mov     ax, 0x13
    int     0x10

    mov     ax, 0xa000
    mov     es, ax

    mov     si, .img
    xor     bx, bx

.b:
    mov     ax, 320
    mul     bx
    mov     di, 320 * 92 + 152
    add     di, ax
    
    mov     cx, 16
.a:
    lodsb
                            ; color 1
    cmp     al, 0x03
    jnz     .c
    mov     al, 0x0f
    jmp     .put
.c:                         ; color 2
    cmp     al, 0x00
    jnz     .d
    mov     al, 0x02
    jmp     .put
.d:                         ; color 3
    cmp     al, 0x01
    jnz     .e
    mov     al, 0x2b
    jmp     .put
.e:
    cmp     al, 0x02        ; color 4
    jnz     .f
    mov     al, 0x00
    jmp     .put
.f:
    mov     al, 0

.put:
    stosb
    loop    .a

    inc     bx
    cmp     bx, 16
    jl     .b

    hlt

.img:
db  0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x03, 0x03, 0x03, 0x03, 0x03, 0x02, 0x02, 0x02, 0x02, 0x02,
db  0x02, 0x02, 0x02, 0x02, 0x02, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x02, 0x02,
db  0x02, 0x02, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x01, 0x02, 0x02, 0x02, 0x02,
db  0x02, 0x02, 0x02, 0x02, 0x00, 0x01, 0x00, 0x01, 0x01, 0x01, 0x00, 0x01, 0x01, 0x01, 0x02, 0x02,
db  0x02, 0x02, 0x02, 0x02, 0x00, 0x01, 0x00, 0x00, 0x01, 0x01, 0x01, 0x00, 0x01, 0x01, 0x01, 0x02,
db  0x02, 0x02, 0x02, 0x02, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x02, 0x02,
db  0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x02, 0x02, 0x02,
db  0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x00, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
db  0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x02,
db  0x01, 0x01, 0x01, 0x02, 0x00, 0x00, 0x03, 0x01, 0x03, 0x03, 0x03, 0x00, 0x00, 0x01, 0x01, 0x02,
db  0x01, 0x01, 0x02, 0x02, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x02, 0x02, 0x00, 0x02, 0x02,
db  0x02, 0x02, 0x02, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x00, 0x00, 0x02, 0x02,
db  0x02, 0x02, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x00, 0x00, 0x02, 0x02,
db  0x02, 0x00, 0x00, 0x03, 0x03, 0x03, 0x02, 0x02, 0x02, 0x03, 0x03, 0x03, 0x00, 0x00, 0x02, 0x02,
db  0x02, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
db  0x02, 0x02, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02

times 510 - ($ - $$) db 0
db 0x55, 0xaa
